<spec>

<pkgkey>g</pkgkey>
<pkgname>Gaussian</pkgname>
<parallelib>openmp</parallelib>
<makefolder>True</makefolder>
<filecheck>gjf or com</filecheck>
<fileclash>gjf and com</fileclash>

<fileexts>
   <e key='com'>job.com</e>
   <e key='gjf'>job.gjf</e>
   <e key='log'>job.log</e>
   <e key='chk'>job.chk</e>
   <e key='wfn'>job.wfn</e>
   <e key='cub'>job.cub</e>
   <e key='oldchk'>job.oldchk</e>
</fileexts>

<filevars>
   <e key='com'>com</e>
   <e key='gjf'>gjf</e>
   <e key='chk'>chk</e>
   <e key='oldchk'>oldchk</e>
</filevars>

<inputfiles>
   <e>gjf|com</e>
   <e>oldchk</e>
</inputfiles>

<outputfiles>
   <e>gjf|com</e>
   <e>log</e>
   <e>chk</e>
   <e>wfn</e>
   <e>cub</e>
</outputfiles>

<positionargs>
   <e>gjf|com</e>
</positionargs>

<profile>
   <export>GAUSS_SCRDIR=$workdir</export>
</profile>

<prescript>
   <e>sed -i "/^%/d" @($gjf|$com)</e>
   <e>sed -i "1i%Chk=$chk\\n%NProcShared=${ncpu}\\n%Mem=${jobram}MB" @($gjf|$com)</e>
   <e>sed -i "/--Link1--/a%Chk=$chk\\n%NProcShared=${ncpu}\\n%Mem=${jobram}MB" @($gjf|$com)</e>
   <e>test -f $oldchk &amp;&amp; sed -i "1i%OldChk=$oldchk" @($gjf|$com)</e>
</prescript>

</spec>
